define("report_customsql/userselector",["exports","core/ajax","core/templates"],(function(_exports,_ajax,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * JavaScript module to work with the auto-complete of users.
   *
   * @module     report_customsql/userselector
   * @copyright  2020 The Open University
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.processResults=function(selector,results){return results.map((user=>({value:user.id,label:user._label})))},_exports.transport=function(selector,query,success,failure){_ajax.default.call([{methodname:"report_customsql_get_users",args:{query:query,capability:document.getElementById("id_capability").value}}])[0].then((results=>(async()=>await Promise.all(results.map((async user=>{const html=await _templates.default.render("report_customsql/form-user-selector-suggestion",user);return user._label=html,user}))))())).then(success).catch(failure)},_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates)}));

//# sourceMappingURL=userselector.min.js.map